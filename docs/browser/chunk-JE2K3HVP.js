import{a as Fe}from"./chunk-OY6EC6Y2.js";import{a as ne}from"./chunk-CYXIDJUQ.js";import{$ as Ce,$a as W,A as _,B as m,C as ee,D as ge,Ea as De,F as fe,G as I,Ga as B,H as j,Ha as se,I as T,Ia as ie,J as L,K as a,L as n,M as d,N as V,Na as Oe,O as $,P as C,Pa as Pe,Q as u,R as s,Ra as Te,W as he,X as r,Y as y,Z as x,_ as U,aa as xe,ab as Le,ba as be,ca as ve,d as A,da as ye,eb as E,fb as Ue,gb as Ae,h as F,ha as Ie,hb as ae,ia as Me,ja as re,ka as le,la as Se,m as pe,n as X,na as te,o as _e,oa as z,p as g,pa as N,pb as je,q as Q,qa as we,r as w,ra as ke,s as f,t as h,ta as Ee,u as ue,w as P,x as l,y as b}from"./chunk-XSDZE57B.js";import"./chunk-7RV22KDK.js";import{a as Xe}from"./chunk-7GML436D.js";import{a as R,b as G,g as qe}from"./chunk-P2VZOJAX.js";var D=(()=>{class t{constructor(e){this.apiService=e}getDashboardCount(){let e=W.dashboardCount;return this.apiService.get(e).pipe(F(i=>A(i)))}userDetails(e){let i=W.userDetails.replace("{userId}",e.userId).replace("{desiId}",e.desiId).replace("{locId}",e?.locId);return this.apiService.get(i).pipe(F(o=>A(o)))}workAreaList(e){let i=W.workAreaList.replace("{userId}",e.userId).replace("{userDesigId}",e.userDesigId);return this.apiService.get(i).pipe(F(o=>A(o)))}categoryListByArea(e){let i=W.categoryListByArea.replace("{taskId}",e);return this.apiService.get(i).pipe(F(o=>A(o)))}subCategoryListByCat(e){let i=W.subCategoryListByCat.replace("{taskId}",e?.taskId).replace("{categoryId}",e?.categoryId);return this.apiService.get(i).pipe(F(o=>A(o)))}static{this.\u0275fac=function(i){return new(i||t)(_e(Le))}}static{this.\u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var v=qe(Xe());var Ve=(()=>{class t{ngOnInit(){this.initializeMap()}ngOnChanges(e){this.addUserMarkers()}initializeMap(){let e=import("./chunk-64NQCRD3.js");this.map=v.map("map",{center:[28.5821,77.3109],zoom:12,zoomControl:!1});let i=v.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors",maxZoom:21}),o=v.tileLayer("http://www.google.cn/maps/vt?lyrs=s@189&gl=cn&x={x}&y={y}&z={z}",{attribution:'Imagery \xA9 <a href="http://maps.google.com">Google</a>',maxZoom:21}),S={"Google Map":v.tileLayer("http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",{maxZoom:21,subdomains:["mt0","mt1","mt2","mt3"],attribution:"&copy; Google Maps"}).addTo(this.map),OpenStreetMap:i,Satellite:o};this.markerLayer=v.layerGroup().addTo(this.map),v.control.zoom({position:"topright"}).addTo(this.map)}addUserMarkers(){this.markerLayer?.clearLayers();let e=[];if(this.allUserList?.forEach(i=>{let{last_lat:o,last_long:p,full_name:S,user_status:H,last_loc:K}=i;if(o&&p){let J=parseFloat(o),Y=parseFloat(p);if(!isNaN(J)&&!isNaN(Y)){let O=v.icon({iconUrl:H==="Online"?"assets/images/rp_marker_person_green.png":"assets/images/rp_marker_person_red.png",iconSize:[30,60]}),Z=v.marker([J,Y],{icon:O}).bindPopup(`
            <div class="live-data pl-2 mt-1">
              <div class="row mb-2">
                <div class="col-md-7">
                  <span style="font-size:16px" class="label"><strong>${S}</strong></span>
                </div>
                <div class="col-md-5">
                  <span> <strong>Status: </strong> ${H}</span>
              </div>              
              <div class="row mb-2">
                  <div class="col-md-12 location-part">
                <span style="color: black" class="label">Address : ${K} </span>
              </div>
            </div>            
            `);Z.addTo(this.markerLayer),e.push(Z)}}}),e.length>0){let i=v.latLngBounds(e?.map(o=>o.getLatLng()));this.map.fitBounds(i)}else{let i=v.latLng(28.5821,77.3109);this.map?.setView(i,12)}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-tracking-map"]],inputs:{allUserList:"allUserList",isLoading:"isLoading"},features:[w],decls:3,vars:0,consts:[[1,"card"],[1,"card-body"],["id","map"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"div",1),d(2,"div",2),n()())},styles:[".map-panel[_ngcontent-%COMP%]{background:#fff;height:500px;border-radius:8px;box-shadow:0 2px 6px #0000001a}#map[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 238px);background-color:#e0e0e0;border-radius:8px;z-index:0!important}  .live-data{padding:4px;width:300px}  .live-data span{font-size:13px;font-weight:400;color:gray}  .live-data span strong{color:#000}"]})}}return t})();function et(t,c){t&1&&d(0,"app-loader")}function tt(t,c){if(t&1){let e=C();a(0,"span",15),u("click",function(){f(e);let o=s(2);return h(o.previousCard())}),d(1,"i",16),r(2," Previous "),n()}}function it(t,c){t&1&&(a(0,"div",17)(1,"p",18),r(2,"No Data Available"),n()())}function nt(t,c){if(t&1){let e=C();a(0,"div",34),u("click",function(o){f(e);let p=s().index,S=s(3);return h(S.toggleDetails(p,o))}),d(1,"img",35),a(2,"div",4)(3,"p",36),r(4),n()()()}if(t&2){let e=s().$implicit,i=s(3);l(),m("src",e.img_path!==""?i.imgUrl+e.img_path:"assets/images/no-image-1.png",P),l(3),y(e.full_name||"NA")}}function at(t,c){if(t&1){let e=C();a(0,"button",37),u("click",function(){f(e);let o=s().$implicit,p=s(3);return h(p.onGetUserBeasedOnId(o,o==null?null:o.se_desig_id))}),r(1),n()}if(t&2){let e=s().$implicit;m("disabled",(e==null?null:e.se_count)==0),l(),x(" SE : ",e==null?null:e.se_count," ")}}function ot(t,c){if(t&1){let e=C();a(0,"button",38),u("click",function(){f(e);let o=s().$implicit,p=s(3);return h(p.onGetUserBeasedOnId(o,o==null?null:o.ee_desig_id))}),r(1),n()}if(t&2){let e=s().$implicit;m("disabled",(e==null?null:e.ee_count)==0),l(),x(" EE : ",e==null?null:e.ee_count," ")}}function rt(t,c){if(t&1){let e=C();a(0,"button",39),u("click",function(){f(e);let o=s().$implicit,p=s(3);return h(p.onGetUserBeasedOnId(o,o==null?null:o.ae_desig_id))}),r(1),n()}if(t&2){let e=s().$implicit;m("disabled",(e==null?null:e.ae_count)==0),l(),x(" AE : ",e==null?null:e.ae_count," ")}}function lt(t,c){if(t&1){let e=C();a(0,"button",40),u("click",function(){f(e);let o=s().$implicit,p=s(3);return h(p.onGetUserBeasedOnId(o,o==null?null:o.je_desig_id))}),r(1),n()}if(t&2){let e=s().$implicit;m("disabled",(e==null?null:e.je_count)==0),l(),x(" JE : ",e==null?null:e.je_count," ")}}function st(t,c){if(t&1&&(a(0,"div",30)(1,"p",31)(2,"time",41),r(3),n()()()),t&2){let e=s().$implicit;l(3),y((e==null?null:e.working_status)||"NA")}}function dt(t,c){if(t&1&&(V(0),a(1,"td")(2,"b"),r(3,"Name:"),n()(),a(4,"td")(5,"strong"),r(6),n()(),$()),t&2){let e=s(2).$implicit;l(6),y(e.full_name||"NA")}}function ct(t,c){if(t&1&&(a(0,"td")(1,"b"),r(2,"Mobile:"),n()(),a(3,"td"),r(4),n()),t&2){let e=s(2).$implicit;l(4),y(e.contact_no||"NA")}}function mt(t,c){if(t&1&&(a(0,"tr")(1,"td")(2,"b"),r(3,"Mobile:"),n()(),a(4,"td"),r(5),n()()),t&2){let e=s(2).$implicit;l(5),y(e.contact_no||"NA")}}function pt(t,c){if(t&1&&(V(0),r(1),$()),t&2){let e=s(3).$implicit;l(),xe("",(e==null?null:e.se_present_count)||0,"/",(e==null?null:e.ee_present_count)||0,"/",(e==null?null:e.ae_present_count)||0,"/",(e==null?null:e.je_present_count)||0,"")}}function _t(t,c){if(t&1&&(V(0),r(1),$()),t&2){let e=s(3).$implicit;l(),Ce("",(e==null?null:e.ee_present_count)||0,"/",(e==null?null:e.ae_present_count)||0,"/",(e==null?null:e.je_present_count)||0,"")}}function ut(t,c){if(t&1&&(V(0),r(1),$()),t&2){let e=s(3).$implicit;l(),U("",(e==null?null:e.ae_present_count)||0,"/",(e==null?null:e.je_present_count)||0,"")}}function gt(t,c){if(t&1&&(V(0),r(1),$()),t&2){let e=s(3).$implicit;l(),y((e==null?null:e.je_present_count)||0)}}function ft(t,c){if(t&1&&(a(0,"tr")(1,"td")(2,"b"),r(3,"Present:"),n()(),a(4,"td",47),_(5,pt,2,4,"ng-container",48)(6,_t,2,3,"ng-container",48)(7,ut,2,2,"ng-container",48)(8,gt,2,1,"ng-container",48),n()()),t&2){let e=s(2).$implicit;l(4),m("ngSwitch",e==null?null:e.designation_id),l(),m("ngSwitchCase",2),l(),m("ngSwitchCase",3),l(),m("ngSwitchCase",4),l(),m("ngSwitchCase",5)}}function ht(t,c){if(t&1&&(a(0,"div",42)(1,"table",43)(2,"tbody")(3,"tr")(4,"td",44),d(5,"img",45),n(),_(6,dt,7,1,"ng-container",46)(7,ct,5,1,"ng-template",null,0,Se),n(),_(9,mt,6,1,"tr",8),a(10,"tr")(11,"td")(12,"b"),r(13,"Status:"),n()(),a(14,"td"),r(15),n()(),_(16,ft,9,5,"tr",8),a(17,"tr")(18,"td")(19,"b"),r(20,"Address:"),n()(),a(21,"td"),r(22),n()()()()()),t&2){let e=he(8),i=s().$implicit,o=s(3);l(5),m("src",i.img_path!==""?o.imgUrl+i.img_path:"assets/images/no-image-1.png",P),l(),m("ngIf",o.jeshow)("ngIfElse",e),l(3),m("ngIf",o.jeshow),l(6),y(i.user_status||"NA"),l(),m("ngIf",!o.jeshow),l(6),y(i.last_loc||"NA")}}function Ct(t,c){if(t&1&&(a(0,"li",21)(1,"div",22),_(2,nt,5,2,"div",23),a(3,"div",24),_(4,at,2,2,"button",25)(5,ot,2,2,"button",26)(6,rt,2,2,"button",27)(7,lt,2,2,"button",28),n(),_(8,st,4,1,"div",29),a(9,"div",30)(10,"p",31),d(11,"i",32),n()()(),_(12,ht,23,7,"div",33),n()),t&2){let e=c.$implicit,i=c.index,o=s(3);l(),m("ngClass",o.jeshow?"JE-profile":""),l(),m("ngIf",!o.jeshow),l(2),m("ngIf",(e==null?null:e.designation_id)==2),l(),m("ngIf",(e==null?null:e.designation_id)==2||(e==null?null:e.designation_id)==3),l(),m("ngIf",(e==null?null:e.designation_id)==2||(e==null?null:e.designation_id)==3||(e==null?null:e.designation_id)==4),l(),m("ngIf",(e==null?null:e.designation_id)==2||(e==null?null:e.designation_id)==3||(e==null?null:e.designation_id)==4||(e==null?null:e.designation_id)==5),l(),m("ngIf",!o.jeshow),l(3),ge(e.user_status==="Offline"?"color: red":"color: green"),l(),m("ngIf",o.activeCardIndex===i||(e==null?null:e.designation_id)==6)}}function xt(t,c){if(t&1&&(a(0,"ul",19),_(1,Ct,13,10,"li",20),re(2,"searchFilter"),n()),t&2){let e=s(2);ee("scrollable",(e.trackingData==null?null:e.trackingData.length)>6),l(),m("ngForOf",le(2,3,e.trackingData,e.searchKeyword))}}function bt(t,c){if(t&1&&(a(0,"div",10)(1,"div",11),_(2,tt,3,0,"span",12),n(),_(3,it,3,0,"div",13),re(4,"searchFilter"),_(5,xt,3,6,"ul",14),n()),t&2){let e,i=s();l(2),m("ngIf",i.isPrevious),l(),m("ngIf",!i.trackingData||i.trackingData.length===0||!((e=le(4,3,i.trackingData,i.searchKeyword))!=null&&e.length)),l(2),m("ngIf",i.trackingData&&i.trackingData.length>0)}}var $e=(()=>{class t{constructor(){this.mapdata=new ue,this.activeCardIndex=null,this.isPrevious=!1,this.imgUrl=ie,this.jeshow=!1}ngOnInit(){}ngOnChanges(e){this.trackingData=this.allUserList}toggleDetails(e,i){i.preventDefault(),this.activeCardIndex=this.activeCardIndex===e?null:e}onGetUserBeasedOnId(e,i){i==6?this.jeshow=!0:this.jeshow=!1,this.isPrevious=!0,this.activeCardIndex=null,this.mapdata.emit({data:e,id:i,type:""})}previousCard(){this.isPrevious=!1,this.jeshow=!1,this.trackingData=[],this.activeCardIndex=null,this.mapdata.emit({data:{},type:"previous"})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-tracking-detail"]],inputs:{allUserList:"allUserList",isLoading:"isLoading"},outputs:{mapdata:"mapdata"},features:[w],decls:11,vars:3,consts:[["elseBlock",""],[1,"card"],[1,"card-header"],[1,"flex","justify-between","items-center"],[1,"min-w-0","flex-auto"],[1,"hidden","sm:flex","sm:flex-col","sm:items-end"],[1,"search-form"],["placeholder","Search for...","type","text",1,"form-control","search-input",3,"ngModelChange","ngModel"],[4,"ngIf"],["class","p-2",4,"ngIf"],[1,"p-2"],[1,"flex","justify-between","mb-2"],["class","px-3 py-1 bg-gray-300 text-black rounded-md","style","cursor: pointer;",3,"click",4,"ngIf"],["class","no-data-message text-center p-4 card-container",4,"ngIf"],["role","list","class","card-container",3,"scrollable",4,"ngIf"],[1,"px-3","py-1","bg-gray-300","text-black","rounded-md",2,"cursor","pointer",3,"click"],["aria-hidden","true",1,"fa","fa-arrow-left"],[1,"no-data-message","text-center","p-4","card-container"],[1,"text-gray-500"],["role","list",1,"card-container"],["class","p-2 mt-1 tracking-row",4,"ngFor","ngForOf"],[1,"p-2","mt-1","tracking-row"],[1,"profile-stats","p",3,"ngClass"],["class","flex min-w-0 gap-x-4 items-center",3,"click",4,"ngIf"],[1,"flex","profile-button"],["class","px-1 py-1 bg-blue-500 text-white rounded-md text-sm",3,"disabled","click",4,"ngIf"],["class","px-1 py-1 bg-green-500 text-white rounded-md text-sm",3,"disabled","click",4,"ngIf"],["class","px-1 py-1 bg-yellow-500 text-white rounded-md text-sm",3,"disabled","click",4,"ngIf"],["class","px-1 py-1 bg-red-500 text-white rounded-md text-sm",3,"disabled","click",4,"ngIf"],["class","hidden shrink-0 sm:flex sm:flex-col sm:items-end",4,"ngIf"],[1,"hidden","shrink-0","sm:flex","sm:flex-col","sm:items-end"],[1,"mt-1","text-xs/5","text-gray-500"],["aria-hidden","true",1,"fa","fa-circle"],["class","details-section mt-3",4,"ngIf"],[1,"flex","min-w-0","gap-x-4","items-center",3,"click"],[1,"size-12","flex-none","rounded-full","bg-gray-50","user-image",3,"src"],[1,"text-sm/6","font-semibold","text-gray-900"],[1,"px-1","py-1","bg-blue-500","text-white","rounded-md","text-sm",3,"click","disabled"],[1,"px-1","py-1","bg-green-500","text-white","rounded-md","text-sm",3,"click","disabled"],[1,"px-1","py-1","bg-yellow-500","text-white","rounded-md","text-sm",3,"click","disabled"],[1,"px-1","py-1","bg-red-500","text-white","rounded-md","text-sm",3,"click","disabled"],["datetime","2023-01-23T13:23Z"],[1,"details-section","mt-3"],[1,"table","table-bordered"],["rowspan","4",1,"image-column",2,"width","140px"],["alt","Image",1,"detail-image",3,"src"],[4,"ngIf","ngIfElse"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(i,o){i&1&&(a(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"p"),r(5,"Tracking"),n()(),a(6,"div",5)(7,"div",6)(8,"input",7),ye("ngModelChange",function(S){return ve(o.searchKeyword,S)||(o.searchKeyword=S),S}),n()()()()(),_(9,et,1,0,"app-loader",8)(10,bt,6,6,"div",9),n()),i&2&&(l(8),be("ngModel",o.searchKeyword),l(),m("ngIf",o.isLoading),l(),m("ngIf",!o.isLoading))},dependencies:[te,z,N,we,ke,Oe,Pe,Te,E,Ue],styles:[".card-container[_ngcontent-%COMP%]{height:calc(100vh - 302px);overflow-y:auto;scrollbar-width:thin;scrollbar-color:#888 #f1f1f1}.card-container.scrollable[_ngcontent-%COMP%]{height:calc(100vh - 277px);overflow-y:auto}.tracking-row[_ngcontent-%COMP%]{background:#fff;border-radius:8px;transition:transform .2s ease;cursor:pointer;border:1px solid #cecece}.profile-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:4fr 10fr 2fr 1fr;align-items:center}.profile-stats.JE-profile[_ngcontent-%COMP%]{grid-template-columns:1fr;align-items:end}.detail-image[_ngcontent-%COMP%]{width:120px;height:120px}@media (max-width: 1024px){.profile-stats[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.5rem}}@media (max-width: 768px){.profile-stats[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.5rem}.profile-button[_ngcontent-%COMP%]{margin-top:.5rem}.sm\\\\[_ngcontent-%COMP%]:flex{display:flex!important;justify-content:flex-end}}.profile-button[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:3px}button[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%]{width:33.33%}"]})}}return t})();function yt(t,c){t&1&&d(0,"app-loader")}function It(t,c){if(t&1&&(a(0,"div",8)(1,"div",9)(2,"div",10)(3,"div")(4,"p"),r(5),n()(),a(6,"div"),r(7),n(),a(8,"div"),r(9),n()()(),d(10,"canvas",11),n()),t&2){let e=s();l(5),x("Total User : ",e.getTotalUserSum(),""),l(2),x(" Total Present : ",e.getTotalSum()," "),l(2),x(" Total Absent : ",e.getTotalUpsentSum()," "),l(),m("datasets",e.barChartData)("labels",e.barChartLabels)("options",e.barChartOptions)("plugins",e.barChartPlugins)("legend",e.barChartLegend)("type","bar")}}function Mt(t,c){t&1&&d(0,"app-loader")}function St(t,c){if(t&1&&(a(0,"div"),d(1,"canvas",12),n()),t&2){let e=s();l(),m("type","pie")("datasets",e.pieChartDatasets)("labels",e.pieChartLabels)("options",e.pieChartOptions)("plugins",e.pieChartPlugins)("legend",e.pieChartLegend)}}var ze=(()=>{class t{constructor(){this.barChartOptions={responsive:!0},this.barChartLabels=["CE","SE","EE","AE","JE"],this.barChartType="bar",this.barChartLegend=!0,this.barChartPlugins=[],this.barChartData=[{data:[0,0,0,0,0],label:"Present",stack:"a",backgroundColor:"rgba(1, 150, 160, 0.89)",hoverBackgroundColor:"rgba(1, 150, 160, 0.89)"},{data:[0,0,0,0,0],label:"Absent",stack:"a",backgroundColor:"rgba(204, 41, 76, 0.96)",hoverBackgroundColor:"rgba(204, 41, 76, 0.96)"}],this.pieChartOptions={responsive:!0},this.pieChartLabels=["CE","SE","EE","AE","JE"],this.pieChartDatasets=[{data:[0,0,0,0,0],backgroundColor:["rgb(10, 160, 160)","rgba(228, 9, 9, 0.6)","rgba(214, 159, 19, 0.6)","rgba(31, 5, 179, 0.6)","rgba(75, 15, 195, 0.6)"],hoverBackgroundColor:["rgb(10, 160, 160)","rgba(228, 9, 9, 0.6)","rgba(214, 159, 19, 0.6)","rgba(31, 5, 179, 0.6)","rgba(75, 15, 195, 0.6)"]}],this.pieChartLegend=!0,this.pieChartPlugins=[]}ngOnChanges(e){e.dashboardData&&e.dashboardData.currentValue&&this.updateChartDatas(this.dashboardData)}updateChartDatas(e){e&&(this.barChartData[1].data=[e.ce_count-e.ce_present_count,e.se_count-e.se_present_count,e.ee_count-e.ee_present_count,e.ae_count-e.ae_present_count,e.je_count-e.je_present_count],this.barChartData[0].data=[e.ce_present_count,e.se_present_count,e.ee_present_count,e.ae_present_count,e.je_present_count],this.pieChartDatasets[0].data=[e.ce_count,e.se_count,e.ee_count,e.ae_count,e.je_count])}getTotalSum(){let e=0;return this.barChartData[0].data?.forEach(i=>e+=i),e}getTotalUpsentSum(){let e=0;return this.barChartData[1].data?.forEach(i=>e+=i),e}getTotalUserSum(){let e=0;return this.pieChartDatasets[0].data?.forEach(i=>e+=i),e}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-employee-chart"]],inputs:{dashboardData:"dashboardData",isChartLoding:"isChartLoding"},features:[w],decls:15,vars:4,consts:[[1,"grid-container"],[1,"card"],[1,"card-item"],[1,"card-header"],[1,"card-body"],[4,"ngIf"],["class","",4,"ngIf"],[1,"card-body","pie"],[1,""],[1,"total-count"],[1,"count"],["baseChart","",3,"datasets","labels","options","plugins","legend","type"],["baseChart","",3,"type","datasets","labels","options","plugins","legend"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),r(4," Activity Check "),n(),a(5,"div",4),_(6,yt,1,0,"app-loader",5)(7,It,11,9,"div",6),n()()(),a(8,"div",1)(9,"div",2)(10,"div",3),r(11," Users "),n(),a(12,"div",7),_(13,Mt,1,0,"app-loader",5)(14,St,2,6,"div",5),n()()()()),i&2&&(l(6),m("ngIf",o.isChartLoding),l(),m("ngIf",!o.isChartLoding&&o.dashboardData),l(6),m("ngIf",o.isChartLoding),l(),m("ngIf",!o.isChartLoding&&o.dashboardData))},dependencies:[N,Ae,E],styles:[".card-body.pie[_ngcontent-%COMP%]{display:flex;justify-content:center}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(480px,1fr));gap:20px}.card-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#fff}.card-body[_ngcontent-%COMP%]{padding:15px}.total-count[_ngcontent-%COMP%]{display:flex;justify-content:center}.total-count[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:40px}"]})}}return t})();function kt(t,c){if(t&1){let e=C();a(0,"div",2),u("click",function(){let o=f(e).$implicit,p=s();return h(p.goToDetails(o))}),a(1,"div",3)(2,"div",4)(3,"span",5),r(4),n(),a(5,"span",6),r(6),n()(),a(7,"div",7),d(8,"img",8),n()()()}if(t&2){let e=c.$implicit;fe("card status ",e.status," header-card"),l(4),y(e.count),l(2),y(e.name),l(2),m("src",e.icon,P)}}var Ne=(()=>{class t{constructor(e){this.router=e,this.cards=[{count:0,name:"Chief Engineer",status:"offline",icon:"assets/images/user.png",key:"ce_count",ce_desig_id:0,user_id:0},{count:0,name:"Supritending Engineer",status:"online",icon:"assets/images/user.png",key:"se_count",ce_desig_id:0,user_id:0},{count:0,name:"Ex. Engineer",status:"stopped",icon:"assets/images/user.png",key:"ee_count",ce_desig_id:0,user_id:0},{count:0,name:"AE",status:"idle",icon:"assets/images/user.png",key:"ae_count",ce_desig_id:0,user_id:0},{count:0,name:"JE",status:"offline",icon:"assets/images/user.png",key:"je_count",ce_desig_id:0,user_id:0}],this.type="JE"}ngOnChanges(e){e.dashboardData&&e.dashboardData.currentValue&&this.updateCardCounts()}updateCardCounts(){this.dashboardData&&(this.cards=this.cards.map(e=>{let i=this.dashboardData[e.key]||0,o=this.dashboardData.user_id||0,p=0;switch(e.key){case"ce_count":p=this.dashboardData.ce_desig_id||0;break;case"se_count":p=this.dashboardData.se_desig_id||0;break;case"ee_count":p=this.dashboardData.ee_desig_id||0;break;case"ae_count":p=this.dashboardData.ae_desig_id||0;break;case"je_count":p=this.dashboardData.je_desig_id||0;break;default:p=0}return G(R({},e),{count:i,user_id:o,ce_desig_id:p})}))}goToDetails(e){this.router.navigateByUrl("/admin/dashboard/user-details",{state:{userData:e}})}static{this.\u0275fac=function(i){return new(i||t)(b(B))}}static{this.\u0275cmp=g({type:t,selectors:[["app-employee-counting"]],inputs:{dashboardData:"dashboardData"},features:[w],decls:2,vars:1,consts:[[1,"card-data"],[3,"class","click",4,"ngFor","ngForOf"],[3,"click"],[1,"card-content"],[1,"card-left"],[1,"card-count"],[1,"card-name"],[1,"card-right"],["alt","Icon",3,"src"]],template:function(i,o){i&1&&(a(0,"div",0),_(1,kt,9,6,"div",1),n()),i&2&&(l(),m("ngForOf",o.cards))},dependencies:[z],styles:[".card-data[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;cursor:pointer}.card-data[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:#fff;border-radius:4px;padding:0;box-shadow:0 .5rem 1rem #00000026!important}.card-data[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:1rem;transition:transform .4s ease}.card-data[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;gap:.5rem;flex-shrink:0}.card-data[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-left[_ngcontent-%COMP%]   .card-count[_ngcontent-%COMP%]{font-size:2rem;font-weight:700}.card-data[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-left[_ngcontent-%COMP%]   .card-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#333}.card-data[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;opacity:1;pointer-events:auto}.card-data[_ngcontent-%COMP%]   .card.header-card[_ngcontent-%COMP%]:hover{transform:scale(.97)}.card-data[_ngcontent-%COMP%]   .card.status.online[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .card-data[_ngcontent-%COMP%]   .card.status.online[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#0dd760}.card-data[_ngcontent-%COMP%]   .card.status.stopped[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .card-data[_ngcontent-%COMP%]   .card.status.stopped[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#1d79ed}.card-data[_ngcontent-%COMP%]   .card.status.idle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .card-data[_ngcontent-%COMP%]   .card.status.idle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fbae05}.card-data[_ngcontent-%COMP%]   .card.status.offline[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .card-data[_ngcontent-%COMP%]   .card.status.offline[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#606060}@media (max-width: 1200px){.card-data[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-left[_ngcontent-%COMP%]   .card-count[_ngcontent-%COMP%]{font-size:1.8rem}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-left[_ngcontent-%COMP%]   .card-name[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 992px){.card-data[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-left[_ngcontent-%COMP%]   .card-count[_ngcontent-%COMP%]{font-size:1.6rem}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-left[_ngcontent-%COMP%]   .card-name[_ngcontent-%COMP%]{font-size:.9rem}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px}}@media (max-width: 768px){.card-data[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-left[_ngcontent-%COMP%]   .card-count[_ngcontent-%COMP%]{font-size:1.4rem}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-left[_ngcontent-%COMP%]   .card-name[_ngcontent-%COMP%]{font-size:.85rem}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;height:45px}}@media (max-width: 576px){.card-data[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:.5rem}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-left[_ngcontent-%COMP%]   .card-count[_ngcontent-%COMP%]{font-size:1.2rem}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-left[_ngcontent-%COMP%]   .card-name[_ngcontent-%COMP%]{font-size:.8rem}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .card-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px}}"]})}}return t})();var Be=(()=>{class t{constructor(){this.markers=[]}ngOnChanges(e){e.allUserList&&this.addUserMarkers()}ngAfterViewInit(){this.initializeMap()}initializeMap(){this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:28.5821,lng:77.3109},zoom:12,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.LEFT_TOP,mapTypeIds:["roadmap","satellite"]},zoomControl:!0,streetViewControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM}})}addUserMarkers(){if(this.markers.forEach(e=>e.setMap(null)),this.markers=[],!!this.allUserList)if(this.allUserList.forEach(e=>{let{last_lat:i,last_long:o,full_name:p,user_status:S,last_loc:H}=e;if(i&&o){let K=parseFloat(i),J=parseFloat(o);if(!isNaN(K)&&!isNaN(J)){let Y=S==="Online"?"assets/images/rp_marker_person_green.png":"assets/images/rp_marker_person_red.png",O=new google.maps.Marker({position:{lat:K,lng:J},map:this.map,icon:{url:Y,scaledSize:new google.maps.Size(30,60)}}),Z=`
          <div class="custom-info-window">
            <button class="close-button" title="Close">&times;</button>
            <div class="live-data pl-2 mt-1">
              <div class="row mb-2">
                <div class="col-md-7">
                  <span style="font-size:16px;font-weight:500;" class="label"><strong>${p}</strong></span>
                </div>
                <div class="col-md-5">
                  <span> <strong style="font-weight:500;">Status: </strong> ${S}</span>
                </div>
              </div>
              <div class="row mb-2">
                <div class="col-md-12 location-part">
                  <span style="color: black" class="label"><strong style="font-weight:500;">Address: </strong> ${H} </span>
                </div>
              </div>
            </div>
          </div>
        `,q=new google.maps.InfoWindow({content:Z,disableAutoPan:!0});O.addListener("click",()=>{q.open(this.map,O),setTimeout(()=>{let k=document.querySelector(".close-button");k&&k.addEventListener("click",()=>{q.close()})},200)}),O.addListener("click",()=>{q.open(this.map,O),setTimeout(()=>{let k=document.querySelector(".gm-ui-hover-effect");k&&k.remove()},0),setTimeout(()=>{let k=document.querySelector(".close-button");k&&k.addEventListener("click",()=>{q.close()})},200)}),this.markers.push(O)}}}),this.markers.length>0){let e=new google.maps.LatLngBounds;this.markers.forEach(i=>e.extend(i.getPosition())),this.map.fitBounds(e)}else this.map.setCenter({lat:28.5821,lng:77.3109}),this.map.setZoom(12)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=g({type:t,selectors:[["tracking-map-google"]],inputs:{allUserList:"allUserList"},features:[w],decls:3,vars:0,consts:[[1,"card"],[1,"card-body"],["id","map"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"div",1),d(2,"div",2),n()())},styles:["#map[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 238px);background-color:#e0e0e0;border-radius:8px;z-index:0!important}.map-container[_ngcontent-%COMP%]{width:100%;height:100vh}[_nghost-%COMP%]     .custom-info-window{padding:0!important;max-width:400px!important;overflow:hidden}[_nghost-%COMP%]     button.close-button{position:absolute!important;top:-4px!important;right:5px!important;background:none!important;border:none!important;font-size:20px!important;font-weight:700!important;color:#000!important;cursor:pointer!important}.gm-ui-hover-effect[_ngcontent-%COMP%]{display:none!important}"]})}}return t})();function Pt(t,c){if(t&1&&d(0,"app-tracking-map",7),t&2){let e=s();m("allUserList",e.allUserList)}}function Tt(t,c){if(t&1&&d(0,"tracking-map-google",7),t&2){let e=s();m("allUserList",e.allUserList)}}var We=(()=>{class t{constructor(e,i){this.dashboardService=e,this.commonService=i,this.data={userId:0,desiId:0,locId:0},this.isLoading=!1,this.isChartLoding=!1}ngOnInit(){this.getUserFromLocal(),this.getDashboardCountData()}getDashboardCountData(){this.isChartLoding=!0,this.dashboardService.getDashboardCount().subscribe(e=>{this.isChartLoding=!1,this.dashboardData=e?.body?.result||null})}getUserFromLocal(){this.userData=this.commonService.getUserDetails(),this.data={userId:0,desiId:this.userData?.designation_id+1,locId:this.userData?.locId},this.getAllUserDetails()}getAllUserDetails(){this.isLoading=!0,this.dashboardService.userDetails(this.data).subscribe(e=>{this.isLoading=!1,this.allUserList=e?.body?.result||[]})}confirm(e){e.type===""?(this.data={userId:e?.data?.user_id,desiId:e?.data?.designation_id+1,locId:this.userData?.locId},e?.data?.designation_id==2?e?.id==3?(this.data.locId=`zone_${e?.data?.zone_id}`,this.data.desiId=e?.id):e?.id==4?(this.data.locId=`zone_${e?.data?.zone_id}`,this.data.desiId=e?.id):e?.id==5?(this.data.locId=`zone_${e?.data?.zone_id}`,this.data.desiId=e?.id):e?.id==6&&(this.data.locId=`zone_${e?.data?.zone_id}`,this.data.desiId=e?.id):e?.data?.designation_id==3?e?.id==4?(this.data.locId=`circle_${e?.data?.circle_id}`,this.data.desiId=e?.id):e?.id==5?(this.data.locId=`circle_${e?.data?.circle_id}`,this.data.desiId=e?.id):e?.id==6&&(this.data.locId=`circle_${e?.data?.circle_id}`,this.data.desiId=e?.id):e?.data?.designation_id==4?e?.id==5?(this.data.locId=`district_${e?.data?.district_id}`,this.data.desiId=e?.id):e?.id==6&&(this.data.locId=`district_${e?.data?.district_id}`,this.data.desiId=e?.id):e?.data?.designation_id==5&&e?.id==6&&(this.data.locId=`division_${e?.data?.division_id}`,this.data.desiId=e?.id),this.getAllUserDetails()):(this.data={userId:0,desiId:this.userData?.designation_id+1,locId:this.userData?.locId},this.getAllUserDetails())}static{this.\u0275fac=function(i){return new(i||t)(b(D),b(ne))}}static{this.\u0275cmp=g({type:t,selectors:[["app-home"]],decls:12,vars:6,consts:[[1,"card-part"],[3,"dashboardData"],[1,"mt-4"],[1,"tracking-data"],[1,"user-details"],[3,"mapdata","allUserList","isLoading"],[1,"map-track"],[3,"allUserList"],[1,"row","mt-4"],[1,"col-md-12"],[3,"dashboardData","isChartLoding"]],template:function(i,o){i&1&&(a(0,"div",0),d(1,"app-employee-counting",1),n(),a(2,"div",2)(3,"div",3)(4,"div",4)(5,"app-tracking-detail",5),u("mapdata",function(S){return o.confirm(S)}),n()(),a(6,"div",6),_(7,Pt,1,1,"app-tracking-map",7)(8,Tt,1,1),n()()(),a(9,"div",8)(10,"div",9),d(11,"app-employee-chart",10),n()()),i&2&&(l(),m("dashboardData",o.dashboardData),l(4),m("allUserList",o.allUserList)("isLoading",o.isLoading),l(2),I(7,(o.userData==null?null:o.userData.is_gmap_enabled)===0?7:(o.userData==null?null:o.userData.is_gmap_enabled)===1?8:-1),l(4),m("dashboardData",o.dashboardData)("isChartLoding",o.isChartLoding))},dependencies:[Ve,$e,ze,Ne,Be],styles:[".tracking-data[_ngcontent-%COMP%]{display:grid;grid-template-columns:6fr 8fr;gap:1rem}@media (max-width: 1024px){.tracking-data[_ngcontent-%COMP%]{grid-template-columns:1fr 2fr;gap:.75rem}}@media (max-width: 768px){.tracking-data[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.5rem}.user-details[_ngcontent-%COMP%], .map-track[_ngcontent-%COMP%]{margin-bottom:1rem}}"]})}}return t})();var Je=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-dashboard-page"]],decls:2,vars:0,consts:[[1,"main-section"]],template:function(i,o){i&1&&(a(0,"div",0),d(1,"app-home"),n())},dependencies:[We]})}}return t})();function Ut(t,c){t&1&&d(0,"app-loader")}function At(t,c){if(t&1){let e=C();a(0,"div",9)(1,"button",15),u("click",function(){f(e);let o=s().$implicit,p=s(3);return h(p.onAssignArea(o==null?null:o.user_id,o==null?null:o.je_desig_id))}),d(2,"i",16),r(3),n(),d(4,"div",17),a(5,"button",18),d(6,"i",19),r(7),n()()}if(t&2){let e=s().$implicit;l(3),x(" Assign (",(e==null?null:e.task_count)||0,") "),l(4),x(" Image (",(e==null?null:e.img_count)||0,") ")}}function Ft(t,c){if(t&1){let e=C();a(0,"button",25),u("click",function(){f(e);let o=s(2).$implicit,p=s(3);return h(p.onGetUserBeasedOnId(o,o==null?null:o.se_desig_id))}),r(1),n()}if(t&2){let e=s(2).$implicit;m("disabled",(e==null?null:e.se_count)==0),l(),U(" SE/P : ",e==null?null:e.se_count,"/",e==null?null:e.se_present_count," ")}}function jt(t,c){if(t&1){let e=C();a(0,"button",26),u("click",function(){f(e);let o=s(2).$implicit,p=s(3);return h(p.onGetUserBeasedOnId(o,o==null?null:o.ee_desig_id))}),r(1),n()}if(t&2){let e=s(2).$implicit;m("disabled",(e==null?null:e.ee_count)==0),l(),U(" EE/P : ",e==null?null:e.ee_count,"/",e==null?null:e.ee_present_count," ")}}function Vt(t,c){if(t&1){let e=C();a(0,"button",27),u("click",function(){f(e);let o=s(2).$implicit,p=s(3);return h(p.onGetUserBeasedOnId(o,o==null?null:o.ae_desig_id))}),r(1),n()}if(t&2){let e=s(2).$implicit;m("disabled",(e==null?null:e.ae_count)==0),l(),U(" AE/P : ",e==null?null:e.ae_count,"/",e==null?null:e.ae_present_count," ")}}function $t(t,c){if(t&1){let e=C();a(0,"button",28),u("click",function(){f(e);let o=s(2).$implicit,p=s(3);return h(p.onGetUserBeasedOnId(o,o==null?null:o.je_desig_id))}),r(1),n()}if(t&2){let e=s(2).$implicit;m("disabled",(e==null?null:e.je_count)==0),l(),U(" JE/P : ",e==null?null:e.je_count,"/",e==null?null:e.je_present_count," ")}}function zt(t,c){if(t&1&&(a(0,"div",20),_(1,Ft,2,3,"button",21)(2,jt,2,3,"button",22)(3,Vt,2,3,"button",23)(4,$t,2,3,"button",24),n()),t&2){let e=s().$implicit;l(),I(1,(e==null?null:e.designation_id)==2?1:-1),l(),I(2,(e==null?null:e.designation_id)==2||(e==null?null:e.designation_id)==3?2:-1),l(),I(3,(e==null?null:e.designation_id)==2||(e==null?null:e.designation_id)==3||(e==null?null:e.designation_id)==4?3:-1),l(),I(4,(e==null?null:e.designation_id)==2||(e==null?null:e.designation_id)==3||(e==null?null:e.designation_id)==4||(e==null?null:e.designation_id)==5?4:-1)}}function Nt(t,c){if(t&1){let e=C();a(0,"div",1)(1,"div",2)(2,"div",3),d(3,"img",4),a(4,"h2",5),r(5),d(6,"br"),a(7,"span",6),d(8,"i",7),r(9),n()()(),a(10,"img",8),u("click",function(){let o=f(e).$implicit,p=s(3);return h(p.goToLive(o))}),n()(),_(11,At,8,2,"div",9)(12,zt,5,4),a(13,"div",10)(14,"p",11),d(15,"i",12),a(16,"span"),r(17,"Battery : 15%"),n()(),a(18,"p",11),d(19,"i",13),a(20,"span"),r(21,"Distance : 5Km"),n()(),a(22,"p",11),d(23,"i",14),a(24,"span"),r(25,"GPS : On"),n()()()()}if(t&2){let e=c.$implicit,i=s(3);l(3),m("src",(e==null?null:e.img_path)!==""?i.imgUrl+(e==null?null:e.img_path):"assets/images/no-image-1.png",P),l(2),x(" ",e==null?null:e.full_name," "),l(4),x(" ",e==null?null:e.contact_no," "),l(2),I(11,(e==null?null:e.designation_id)==6?11:12)}}function Bt(t,c){if(t&1&&T(0,Nt,26,4,"div",1,j),t&2){let e=s(2);L(e.allUserList)}}function Wt(t,c){t&1&&(a(0,"div",29)(1,"p",30),r(2,"Data Not Available"),n()())}function Jt(t,c){if(t&1&&(a(0,"div",0),_(1,Bt,2,0)(2,Wt,3,0),n()),t&2){let e=s();l(),I(1,e.allUserList&&e.allUserList.length>0?1:2)}}var Re=(()=>{class t{constructor(e,i,o){this.dashboardService=e,this.commonService=i,this.router=o,this.isLoading=!1,this.data={userId:0,desiId:0,locId:0},this.imgUrl=ie}ngOnInit(){this.userData=history.state.userData,this.userData&&(this.data.userId=this.userData?.user_id,this.data.desiId=this.userData?.ce_desig_id,this.getUserFromLocal())}getUserFromLocal(){this.userData=this.commonService.getUserDetails(),this.data.locId=this.userData?.locId,this.getAllUserDetails()}getAllUserDetails(){this.isLoading=!0,this.dashboardService.userDetails(this.data).subscribe(e=>{this.isLoading=!1,this.allUserList=e?.body?.result||[]})}onGetUserBeasedOnId(e,i){e?.designation_id==2?i==3?(this.data.locId=`zone_${e?.zone_id}`,this.data.desiId=i):i==4?(this.data.locId=`zone_${e?.zone_id}`,this.data.desiId=i):i==5?(this.data.locId=`zone_${e?.zone_id}`,this.data.desiId=i):i==6&&(this.data.locId=`zone_${e?.zone_id}`,this.data.desiId=i):e?.designation_id==3?i==4?(this.data.locId=`circle_${e?.circle_id}`,this.data.desiId=i):i==5?(this.data.locId=`circle_${e?.circle_id}`,this.data.desiId=i):i==6&&(this.data.locId=`circle_${e?.circle_id}`,this.data.desiId=i):e?.designation_id==4?i==5?(this.data.locId=`district_${e?.district_id}`,this.data.desiId=i):i==6&&(this.data.locId=`district_${e?.district_id}`,this.data.desiId=i):e?.designation_id==5&&i==6&&(this.data.locId=`division_${e?.division_id}`,this.data.desiId=i),this.getAllUserDetails()}onAssignArea(e,i){this.router.navigateByUrl(`/admin/dashboard/${e}/${i}/area-allot-details`)}goToLive(e){console.log(e),this.router.navigateByUrl("/admin/live/track")}static{this.\u0275fac=function(i){return new(i||t)(b(D),b(ne),b(B))}}static{this.\u0275cmp=g({type:t,selectors:[["manage-user-details"]],decls:2,vars:1,consts:[[1,"grid","grid-cols-1","md:grid-cols-4","gap-6","p-6","bg-gray-50"],[1,"bg-white","shadow","rounded-lg","p-4"],[1,"flex","justify-between","items-center"],[1,"flex","justify-center","gap-x-2","items-center"],["alt","Jane Cooper",1,"w-14","h-14","rounded-full","border-2","border-white",3,"src"],[1,"text-lg","text-gray-800"],[1,"inline-flex","items-center","px-3","py-0.5","rounded-full","bg-green-100","text-green-800","mt-2"],[1,"fas","fa-phone"],["src","assets/images/map-pin.png",1,"w-10","h-10","rounded-full","border-2","border-white","cursor-pointer",3,"click"],[1,"flex","border","rounded-lg","overflow-hidden","mt-2"],[1,"border-t","mt-2","pt-2","flex","justify-between"],[1,"flex","items-center","space-x-2","text-gray-600","hover:text-gray-800"],[1,"fas","fa-battery-full"],[1,"fas","fa-road"],[1,"fas","fa-map-marker-alt"],[1,"flex-1","flex","items-center","justify-center","py-2","text-gray-700","hover:bg-gray-100",3,"click"],[1,"fas","fa-envelope","mr-2","text-gray-500"],[1,"w-px","bg-gray-300"],[1,"flex-1","flex","items-center","justify-center","py-2","text-gray-700","hover:bg-gray-100"],[1,"fas","fa-image","mr-2","text-gray-500"],[1,"flex","justify-between","profile-button","mt-2","pt-2"],[1,"px-2","py-1","bg-blue-500","text-white","rounded-full",3,"disabled"],[1,"px-2","py-1","bg-green-500","text-white","rounded-full",3,"disabled"],[1,"px-2","py-1","bg-yellow-500","text-white","rounded-full",3,"disabled"],[1,"px-2","py-1","bg-red-500","text-white","rounded-full",3,"disabled"],[1,"px-2","py-1","bg-blue-500","text-white","rounded-full",3,"click","disabled"],[1,"px-2","py-1","bg-green-500","text-white","rounded-full",3,"click","disabled"],[1,"px-2","py-1","bg-yellow-500","text-white","rounded-full",3,"click","disabled"],[1,"px-2","py-1","bg-red-500","text-white","rounded-full",3,"click","disabled"],[1,"bg-white","shadow","rounded-lg","p-4","col-span-full","text-center"],[1,"text-gray-600"]],template:function(i,o){i&1&&_(0,Ut,1,0,"app-loader")(1,Jt,3,1),i&2&&I(0,o.isLoading?0:1)},dependencies:[E]})}}return t})();var Ge=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-dashboard-user-details"]],decls:2,vars:0,consts:[[1,"main-section"]],template:function(i,o){i&1&&(a(0,"div",0),d(1,"manage-user-details"),n())},dependencies:[Re]})}}return t})();function Ht(t,c){if(t&1){let e=C();a(0,"div",5)(1,"div",6)(2,"p",7),u("click",function(){let o=f(e).$implicit,p=s();return h(p.toggleAccordion(o.sub_category_id))}),a(3,"span",8),r(4),n(),r(5),n(),a(6,"span",9)(7,"span",8),r(8),n(),a(9,"span",10),u("click",function(){f(e);let o=s();return h(o.openAreaForm())}),r(10,"Form"),n()()(),a(11,"div",11)(12,"h3"),r(13,"Before Details :- "),n(),d(14,"hr"),a(15,"div",12)(16,"div",13),d(17,"img",14),a(18,"div",15)(19,"p",16),r(20,"Remarks: "),n(),a(21,"p",16),r(22,"Adress: "),n()()(),a(23,"div",13),d(24,"img",17),a(25,"div",15)(26,"p",16),r(27,"Remarks: "),n(),a(28,"p",16),r(29,"Adress: "),n()()()(),a(30,"h3"),r(31,"After Details :- "),n(),d(32,"hr"),a(33,"div",12)(34,"div",13),d(35,"img",14),a(36,"div",15)(37,"p",16),r(38,"Remarks: "),n(),a(39,"p",16),r(40,"Adress: "),n()()(),a(41,"div",13),d(42,"img",17),a(43,"div",15)(44,"p",16),r(45,"Remarks: "),n(),a(46,"p",16),r(47,"Adress: "),n()()()()()()}if(t&2){let e=c.$implicit;l(4),x(" ",e.isOpen?"-":"+"," "),l(),x(" ",e.sub_category_name," "),l(3),x("Status: ",e.sub_cat_status==0?"Pending":"Closed",""),l(3),ee("max-h-0",!e.isOpen)("max-h-[1000px]",e.isOpen)}}var He=(()=>{class t{constructor(e,i,o){this.bsmodalService=e,this.router=i,this.dashboardService=o}ngOnInit(){this.getSubCategoryByList()}getSubCategoryByList(){let e={taskId:this.taskId,categoryId:this.editData?.category_id};this.dashboardService.subCategoryListByCat(e).subscribe(i=>{this.accordionItems=i?.body?.result,this.accordionItems=this.accordionItems.map(o=>G(R({},o),{isOpen:!1}))})}toggleAccordion(e){this.accordionItems=this.accordionItems.map(i=>G(R({},i),{isOpen:i.sub_category_id===e?!i.isOpen:!1}))}openAreaForm(){let e=this.router.serializeUrl(this.router.createUrlTree(["/admin/dashboard/area-plot-form"]));window.open(e,"_blank")}close(){this.bsmodalService.hide()}static{this.\u0275fac=function(i){return new(i||t)(b(ae),b(B),b(D))}}static{this.\u0275cmp=g({type:t,selectors:[["app-area-allot-details-popup"]],decls:9,vars:1,consts:[[1,"modal-header","text-center"],[1,"close-modal",3,"click"],[1,"fa","fa-close",2,"cursor","pointer"],[1,"modal-body"],[1,"w-full","mx-auto","mt-2"],[1,"border","border-gray-300","rounded-lg","mb-2"],[1,"w-full","text-left","px-4","py-2","bg-gray-300","flex","justify-between","items-center"],[1,"flex","items-center","cursor-pointer",3,"click"],[1,"mr-2"],[1,"flex","items-center"],[1,"text-blue-500","underline","cursor-pointer",3,"click"],[1,"overflow-hidden","transition-all","duration-500","ease-in-out","px-2"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-6","p-6"],[1,"border","border-gray-300","rounded-lg","shadow-md","p-4","flex","flex-col","items-center"],["src","assets/images/no-image.png","alt","Jane Cooper",1,"w-24","h-24","rounded-full","object-cover"],[1,"mt-4","w-full","border-t","pt-2","text-gray-600"],[1,"text-gray-500"],["src","assets/images/no-image.png","alt","Cody Fisher",1,"w-24","h-24","rounded-full","object-cover"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"h5"),r(2),n(),a(3,"div",1),u("click",function(){return o.close()}),d(4,"i",2),n()(),a(5,"div",3)(6,"div",4),T(7,Ht,48,7,"div",5,j),n()()),i&2&&(l(2),x("(",o.editData==null?null:o.editData.category_name,") Area Allot Details "),l(5),L(o.accordionItems))}})}}return t})();var Kt=(t,c)=>c.area_name,Yt=(t,c,e)=>({"border-2 border-blue-700 scale-105 shadow-lg":t,"border border-gray-300 w-full":c,"bg-green-500 text-white":e}),Zt=(t,c)=>({"bg-green-600 text-white":t,"bg-white text-black":c});function qt(t,c){if(t&1){let e=C();a(0,"div",5),u("click",function(){let o=f(e).$implicit,p=s(2);return h(p.onOpenCategory(o.area_name,o==null?null:o.task_id))}),a(1,"div",6)(2,"div")(3,"h2",7),r(4),n()(),a(5,"span",8),d(6,"i",9),n()()()}if(t&2){let e=c.$implicit,i=s(2);m("ngClass",Me(2,Yt,i.openItemId===e.area_name,i.openItemId!==e.area_name,e.task_status===1)),l(4),y(e.area_name)}}function Xt(t,c){if(t&1&&T(0,qt,7,6,"div",4,Kt),t&2){let e=s();L(e.accordionItems)}}function Qt(t,c){t&1&&(a(0,"div",10)(1,"h2",11),r(2,"No Data Available"),n()())}function ei(t,c){t&1&&d(0,"app-loader")}function ti(t,c){if(t&1&&(a(0,"th")(1,"span"),r(2),n()()),t&2){let e=c.$implicit;l(2),y(e==null?null:e.title)}}function ii(t,c){t&1&&(a(0,"span",18),r(1,"Open"),n())}function ni(t,c){t&1&&(a(0,"span",18),r(1,"Closed"),n())}function ai(t,c){if(t&1){let e=C();a(0,"tr",16)(1,"td"),r(2),n(),a(3,"td"),r(4),n(),a(5,"td"),_(6,ii,2,0,"span",18)(7,ni,2,0),n(),a(8,"td",19)(9,"button",20),u("click",function(){let o=f(e).$implicit,p=s(3);return h(p.openAreaPlot(o))}),d(10,"i",21),n()()()}if(t&2){let e=c.$implicit;m("ngClass",Ie(4,Zt,(e==null?null:e.cat_status)===1,(e==null?null:e.cat_status)===0)),l(2),y((e==null?null:e.category_name)||"NA"),l(2),y(e==null?null:e.sub_cat_count),l(2),I(6,(e==null?null:e.cat_status)==0?6:7)}}function oi(t,c){t&1&&(a(0,"div",22),r(1," No Category Available "),n())}function ri(t,c){if(t&1&&(a(0,"table",13,0)(2,"thead")(3,"tr",14),_(4,ti,3,1,"th",15),n()(),a(5,"tbody"),T(6,ai,11,7,"tr",16,j),n()(),_(8,oi,2,0,"div",17)),t&2){let e=s(2);l(4),m("ngForOf",e.columns),l(2),L(e.categoryList),l(2),m("ngIf",!(e.categoryList!=null&&e.categoryList.length))}}function li(t,c){if(t&1&&(a(0,"div",3)(1,"div",12),_(2,ei,1,0,"app-loader")(3,ri,9,2),n()()),t&2){let e=s();l(2),I(2,e.isLoading?2:3)}}var Ke=(()=>{class t{constructor(e,i,o,p){this.bsmoalService=e,this.CategoryService=i,this.route=o,this.dashboardService=p,this.openItemId=null,this.isLoading=!1}ngOnInit(){this.route?.paramMap.subscribe(e=>{this.id=e.get("id"),this.desiId=e.get("desiId"),this.poiWorkList()}),this.setInitialtable()}setInitialtable(){this.columns=[{key:"Category Name",title:"Category Name"},{key:"Total Work",title:"Total Work",width:"5%"},{key:"Work Status",title:"Work Status",width:"5%"},{key:"Work List",title:"Work List",width:"10%"}]}poiWorkList(){let e={userId:Number(this.id),userDesigId:Number(this.desiId)};this.dashboardService.workAreaList(e).subscribe(i=>{this.accordionItems=i?.body?.result||[]})}getCategoryList(e){this.isLoading=!0,this.dashboardService.categoryListByArea(e).subscribe(i=>{setTimeout(()=>{this.isLoading=!1},600),this.categoryList=i?.body?.result||[]})}openAreaPlot(e){let i={initialState:{editData:e,taskId:this.taskId}};this.bsModalRef=this.bsmoalService.show(He,Object.assign(i,{id:"confirmation",class:"modal-lg modal-dialog-centered alert-popup"}))}onOpenCategory(e,i){this.openItemId===e?(this.openItemId=null,this.categoryList=[],this.taskId=null):(this.taskId=i,this.openItemId=e,this.getCategoryList(i))}static{this.\u0275fac=function(i){return new(i||t)(b(ae),b(Fe),b(De),b(D))}}static{this.\u0275cmp=g({type:t,selectors:[["app-je-details"]],decls:5,vars:2,consts:[["TABLE",""],[1,"je-details","p-6"],[1,"left"],[1,"cirlce-side"],[1,"shadow","rounded-lg","p-4","mb-3","cursor-pointer","transition-all","duration-300",3,"ngClass"],[1,"shadow","rounded-lg","p-4","mb-3","cursor-pointer","transition-all","duration-300",3,"click","ngClass"],[1,"flex","justify-between","items-center"],[1,"text-lg"],[1,"inline-flex","items-center","px-3","py-0.5"],["aria-hidden","true",1,"fa","fa-arrow-right"],[1,"bg-white","shadow","rounded-lg","p-4","text-center","border","border-gray-300"],[1,"text-lg","text-gray-800"],["id","datatable_wrapper"],["id","datatable","role","grid","aria-describedby","datatable_info","width","100%",1,"table","table-striped","nowrap","dataTable","no-footer","dtr-inline",2,"width","100%"],["role","row"],[4,"ngFor","ngForOf"],[3,"ngClass"],["class","text-center py-4 text-gray-500",4,"ngIf"],[1,"font-medium"],[1,"flex","space-x-2"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-tasks"],[1,"text-center","py-4","text-gray-500"]],template:function(i,o){i&1&&(a(0,"div",1)(1,"div",2),_(2,Xt,2,0)(3,Qt,3,0),n(),_(4,li,4,1,"div",3),n()),i&2&&(l(2),I(2,o.accordionItems&&o.accordionItems.length>0?2:3),l(2),I(4,o.openItemId!==null?4:-1))},dependencies:[te,z,N,E],styles:[".je-details[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:2fr 5fr;gap:1rem}.cotant-part[_ngcontent-%COMP%]{display:grid;grid-template-columns:10fr 3fr;gap:5px}.cirlce-side[_ngcontent-%COMP%], .right-side[_ngcontent-%COMP%]{align-self:start}div#datatable_wrapper[_ngcontent-%COMP%]{height:calc(100vh - 92px);overflow:auto;scrollbar-width:thin}tr.bg-green-600.text-white[_ngcontent-%COMP%]{background-color:rgb(22 163 74/var(--tw-bg-opacity, 1))}"]})}}return t})();var Ye=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-area-plot-form"]],decls:156,vars:0,consts:[[1,"main-section"],["colspan","7",1,"center"],["colspan","5"],["colspan","2",1,"center"],["colspan","7"],["colspan","3"],["colspan","4"],["colspan","2"],["colspan","3",1,"center"],["colspan","6"]],template:function(i,o){i&1&&(a(0,"div",0)(1,"table")(2,"tr")(3,"td",1)(4,"h2"),r(5,"UTTAR PRADESH PUBLIC WORK DEPARTMENT"),n()()(),a(6,"tr")(7,"td",1)(8,"h2"),r(9,"-: Work Implementation Unit :-"),n()()(),a(10,"tr")(11,"td",1)(12,"h2"),r(13,"Executive Engineer, Construction Division, PWD, Varanasi"),n()()(),a(14,"tr")(15,"td",2),r(16,"Sr No.: 1"),n(),a(17,"td",3),r(18,"Date: 01/01/1970 05:30:00"),n()(),a(19,"tr")(20,"td",4),r(21,"NAME OF WORK: "),n()(),a(22,"tr")(23,"td",4),r(24,"NAME OF CONTRACTOR: "),n()(),a(25,"tr")(26,"td",5),r(27,"Chainage: "),n(),a(28,"td",6),r(29,"Contract Bond No.: "),n()(),a(30,"tr")(31,"td",5),r(32,"MDD: "),n(),a(33,"td",7),r(34,"Date of Sampling: "),n(),a(35,"td",7),r(36,"Date of Testing: "),n()(),a(37,"tr")(38,"td",7),r(39,"Density Determination Test in Situ (Sand Replacement Method)"),n(),a(40,"td",8),r(41,"IS:2720 (Part XXVIII)"),n(),a(42,"td",7),r(43,"OMC: "),n()(),a(44,"tr")(45,"td",1)(46,"b"),r(47,"(A) Calibration of Sand"),n()()(),a(48,"tr")(49,"td"),r(50,"(I) Mean weight of sand in cone (of pouring cylinder) (W2) in g."),n(),d(51,"td",9),n(),a(52,"tr")(53,"td"),r(54,"(II) Volume of calibrating cylinder (V) in cm"),a(55,"sup"),r(56,"3"),n()(),d(57,"td",9),n(),a(58,"tr")(59,"td"),r(60,"(III) Weight of sand before pouring into calibrating container (W1) in g."),n(),d(61,"td",9),n(),a(62,"tr")(63,"td"),r(64,"(IV) Mean weight of sand after pouring into calibrating container (W3) in g."),n(),d(65,"td",9),n(),a(66,"tr")(67,"td"),r(68,"(V) Weight of sand to fill calibrating cylinder (Wa = W1-W2-W3) in g."),n(),d(69,"td",9),n(),a(70,"tr")(71,"td"),r(72,"(VI) Bulk density of sand Y"),a(73,"sub"),r(74,"s"),n(),r(75," = (Wa/V) g/cm"),a(76,"sup"),r(77,"3"),n()(),d(78,"td",9),n(),a(79,"tr")(80,"td",1)(81,"b"),r(82,"(B) Determination of Field Density of Core"),n()()(),a(83,"tr")(84,"td"),r(85,"(I) Weight of wet material from hole (Ww) in g."),n(),d(86,"td",9),n(),a(87,"tr")(88,"td"),r(89,"(II) Weight of sand (+ cylinder) before pouring into hole and cone (W1) in g."),n(),d(90,"td",9),n(),a(91,"tr")(92,"td"),r(93,"(III) Weight of sand (+ cylinder) before pouring into hole and cone (W4) in g."),n(),d(94,"td",9),n(),a(95,"tr")(96,"td"),r(97,"(IV) Weight of sand in cone (W2) in g."),n(),d(98,"td",9),n(),a(99,"tr")(100,"td"),r(101,"(V) Weight of sand in hole, in g. W"),a(102,"sub"),r(103,"b"),n(),r(104," = (W1-W4-W2)"),n(),d(105,"td",9),n(),a(106,"tr")(107,"td"),r(108,"(VI) Bulk density Y"),a(109,"sub"),r(110,"b"),n(),r(111," = (Ww/W"),a(112,"sub"),r(113,"b"),n(),r(114,") Y"),a(115,"sub"),r(116,"s"),n(),r(117," g/cm"),a(118,"sup"),r(119,"3"),n()(),d(120,"td",9),n(),a(121,"tr")(122,"td"),r(123,"(VII) Moisture Content (W) percent (By moisture meter)"),n(),d(124,"td",9),n(),a(125,"tr")(126,"td"),r(127,"(VIII) Dry density Y"),a(128,"sub"),r(129,"d"),n(),r(130," = (Y"),a(131,"sub"),r(132,"b"),n(),r(133," / (1 + (W/100))) g/cm"),a(134,"sup"),r(135,"3"),n()(),d(136,"td",9),n(),a(137,"tr")(138,"td"),r(139,"(XI) Relative Dry density w.r.t MDD as above in percentage (=100xY"),a(140,"sub"),r(141,"d"),n(),r(142,"/MDD)"),n(),d(143,"td",9),n(),a(144,"tr")(145,"td",1)(146,"b"),r(147,"Layer"),n()()(),a(148,"tr")(149,"td"),r(150,"Mean Value as per above test"),n(),d(151,"td",9),n(),a(152,"tr")(153,"td"),r(154,"Not less than.......percent of MDD"),n(),d(155,"td",9),n()()())},styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-family:Arial,sans-serif;font-size:12px}h2[_ngcontent-%COMP%]{font-size:2rem!important}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #000;padding:5px;text-align:left}th[_ngcontent-%COMP%], .center[_ngcontent-%COMP%]{text-align:center}.no-border[_ngcontent-%COMP%]{border:none}"]})}}return t})();var si=[{path:"home",component:Je},{path:"user-details",component:Ge},{path:":id/:desiId/area-allot-details",component:Ke},{path:"area-plot-form",component:Ye}],Ze=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Q({type:t})}static{this.\u0275inj=X({imports:[se.forChild(si),se]})}}return t})();var cn=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Q({type:t})}static{this.\u0275inj=X({imports:[Ee,Ze,je]})}}return t})();export{cn as AdminDashboardManageModule};
