<div class="modal-header text-center">
    <h5>{{label}} {{designation?.text}}</h5>
    <div class="close-modal" (click)="close()">
        <i class="fa fa-close" style="cursor: pointer;"></i>
    </div>
</div>
<div class="modal-body">
    <form [formGroup]="userForm">
        <div class="row">
            <!-- CE Dropdown -->
            <div class="col-md-3 mb-2"
                >
                <label class="form-label">Chief Engineer <span class="text-danger">*</span></label>
                <ngx-select-dropdown [config]="config" [options]="chiefEngData" formControlName="chiefEngineer"
                    (change)="onChiefEngineerChange($event)">
                </ngx-select-dropdown>
                <div *ngIf="userForm.get('chiefEngineer')?.invalid && userForm.get('chiefEngineer')?.touched">
                    <span class="text-danger">Chief Engineer is required.</span>
                </div>
            </div>

              <!-- Zone -->
              <div class="col-md-3 mb-2">
              <label class="form-label">Zone <span class="text-danger">*</span></label>
              <ngx-select-dropdown [config]="config" [options]="zoneList" formControlName="zone"
                  >
              </ngx-select-dropdown>
              <div *ngIf="userForm.get('zone')?.invalid && userForm.get('zone')?.touched">
                  <span class="text-danger">Zone is required.</span>
              </div>
          </div>

            <!-- SE -->
            <div class="col-md-3 mb-2"
               >
                <label class="form-label">Supritending Engineer <span class="text-danger">*</span></label>
                <ngx-select-dropdown [config]="config" [options]="supritendingEngList"
                    formControlName="supritendingEngineer" (change)="onSupritendingEngineerChange($event)">
                </ngx-select-dropdown>
                <div *ngIf="userForm.get('supritendingEngineer')?.invalid && userForm.get('supritendingEngineer')?.touched">
                    <span class="text-danger">Supritending Engineer is required.</span>
                </div>
            </div>

             <!-- Circle -->
             <div class="col-md-3 mb-2"
             >
             <label class="form-label">Circle <span class="text-danger">*</span></label>
             <ngx-select-dropdown [config]="config" [options]="circleList" formControlName="circle"
                 >
             </ngx-select-dropdown>
             <div *ngIf="userForm.get('circle')?.invalid && userForm.get('circle')?.touched">
                 <span class="text-danger">Circle is required.</span>
             </div>
         </div>

            <!-- EE -->
            <div class="col-md-3 mb-2"
                >
                <label class="form-label">Executive Engineer <span class="text-danger">*</span></label>
                <ngx-select-dropdown [config]="config" [options]="executiveEngList" formControlName="executiveEngineer"
                    (change)="onExecutiveEngineerChange($event)">
                </ngx-select-dropdown>
                <div *ngIf="userForm.get('executiveEngineer')?.invalid && userForm.get('executiveEngineer')?.touched">
                    <span class="text-danger">Executive Engineer is required.</span>
                </div>
            </div>

                <!-- City -->
                <div class="col-md-3 mb-2"
                >
                <label class="form-label">City <span class="text-danger">*</span></label>
                <ngx-select-dropdown [config]="config" [options]="cityList" formControlName="city"
                    (change)="onCityChange($event)">
                </ngx-select-dropdown>
                <div *ngIf="userForm.get('city')?.invalid && userForm.get('city')?.touched">
                    <span class="text-danger">City is required.</span>
                </div>
            </div>     

           
            <!-- Division -->
            <div class="col-md-3 mb-2"
               >
                <label class="form-label">Division <span class="text-danger">*</span></label>
                <ngx-select-dropdown [config]="config" [options]="divisionData" [multiple]="true" formControlName="division">
                </ngx-select-dropdown>
                <div *ngIf="userForm.get('division')?.invalid && userForm.get('division')?.touched">
                    <span class="text-danger">Division is required.</span>
                </div>
            </div>
            <!-- Common Fields -->
            <div class="col-md-3 mb-2">
                <label class="form-label">Name <span class="text-danger">*</span></label>
                <div class="input-group mb-2">
                    <input type="text" class="form-control" placeholder="Enter Name" formControlName="name" />
                </div>
            </div>
            <div class="col-md-3 mb-2">
                <label class="form-label">Contact No.</label>
                <div class="input-group mb-2">
                    <input type="text" class="form-control" placeholder="Enter Contact No." formControlName="contactNo" />
                </div>
                <div *ngIf="userForm.get('contactNo')?.invalid && userForm.get('contactNo')?.touched">
                    <span class="text-danger">Contact No. must be a 10-digit number.</span>
                </div>
            </div>
            
            <div class="col-md-3 mb-2">
                <label class="form-label">Email</label>
                <div class="input-group mb-2">
                    <input type="email" class="form-control" placeholder="Enter Email" formControlName="email" />
                </div>
                <div *ngIf="userForm.get('email')?.invalid && userForm.get('email')?.touched">
                    <span class="text-danger">Please enter a valid email address.</span>
                </div>
            </div>
            <div class="col-md-3 mb-2">
                <label class="form-label">Address</label>
                <input type="text" class="form-control" placeholder="Enter Address" formControlName="address" />
            </div>
            <div class="col-md-3 mb-2">
                <label class="form-label">Login Id <span class="text-danger">*</span></label>
                <div class="input-group mb-2">
                    <input type="text" class="form-control" placeholder="Enter Login Id" formControlName="loginId" />
                </div>
            </div>
            <div class="col-md-3 mb-2">
                <label class="form-label">Login Password <span class="text-danger">*</span></label>
                <div class="input-group mb-2 password-container">
                    <input  type="{{ showPassword ? 'text' : 'password' }}" class="form-control password" placeholder="Enter Login Password"
                        formControlName="loginPassword" />
                        <i
                        class="fa"
                        id="visiblePassword"
                        (click)="showPassword = !showPassword"
                        [ngClass]="{'fa-eye': !showPassword, 'fa-eye-slash': showPassword}"
                        style="cursor: pointer;"
                      ></i>
                </div>
            </div>
            <div class="col-md-3 mb-2">
                <label class="form-label">Remarks</label>
                <input type="text" class="form-control" placeholder="Enter Remarks" formControlName="remarks" />
            </div>
            <div class="col-md-3 mb-2">
                <label class="form-label">Status <span class="text-danger">*</span></label>
                <select class="form-control" formControlName="status">
                    <option *ngFor="let value of status" [ngValue]="value.id">{{ value.value }}</option>
                </select>
            </div>
            <div class="col-md-3 mb-2">
                <label class="form-label">Photo</label>
                <div *ngIf="imagePath">
                    <img [src]="getImageUrl(imagePath)" alt="Profile Photo" class="w-10 h-10 rounded-full profile-image mb-2" />
                  </div>
                <input type="file" class="form-control" formControlName="photo" (change)="onFileChange($event)"/>
            </div>
            <!-- Submit Button -->
            <div class="col-md-3 mb-2 mt-4">
                <button class="btn btn-success" [disabled]="userForm.invalid" (click)="submit(userForm.value)">Submit</button>
            </div>
        </div>
    </form>
</div>